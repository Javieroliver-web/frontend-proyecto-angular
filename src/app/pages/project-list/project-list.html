<!-- src/app/pages/project-list/project-list.html -->

<div class="page-header">
    <h2>Mis Proyectos</h2>
    <button class="btn btn-primary" (click)="abrirModal()">+ Crear Proyecto</button>
  </div>
  
  <div class="projects-grid">
    <div class="project-card" 
         *ngFor="let p of proyectos" 
         (click)="irABoard(p.id)">
      
      <button class="btn-delete-project" (click)="eliminarProyecto($event, p.id)">Ã—</button>
      
      <h3>{{ p.nombre }}</h3>
      <p style="color: #e0f7fa; font-size: 0.9rem; margin: 10px 0;">
        {{ p.descripcion || 'Sin descripciÃ³n' }}
      </p>
      <div style="margin-top: auto; font-size: 0.8rem;">
        Estado: <strong>{{ p.estado }}</strong>
      </div>
    </div>
    
    <div *ngIf="proyectos.length === 0" class="empty-state">
      <p>ðŸ“‚ No hay proyectos</p>
      <p style="font-size: 0.85rem; opacity: 0.7;">Crea tu primer proyecto con el botÃ³n superior</p>
    </div>
  </div>
  
  <!-- MODAL DE CREAR PROYECTO -->
  <div class="modal" [class.show]="modalOpen" (click)="cerrarModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>ðŸ“‚ Nuevo Proyecto</h3>
        <button class="close-btn" (click)="cerrarModal()">Ã—</button>
      </div>
      
      <form (ngSubmit)="crearProyecto()">
        <div class="form-group">
          <label>Nombre *</label>
          <input 
            type="text" 
            name="nombre" 
            [(ngModel)]="newProject.nombre" 
            class="form-control" 
            placeholder="Ej: Desarrollo Web App"
            required>
        </div>
        
        <div class="form-group">
          <label>DescripciÃ³n</label>
          <textarea 
            name="desc" 
            [(ngModel)]="newProject.descripcion" 
            class="form-control" 
            rows="3"
            placeholder="Describe brevemente el proyecto..."></textarea>
        </div>
        
        <div class="row-grid">
          <div class="form-group">
            <label>Fecha Inicio</label>
            <input 
              type="date" 
              name="inicio" 
              [(ngModel)]="newProject.fecha_inicio" 
              class="form-control" 
              required>
          </div>
          <div class="form-group">
            <label>Fecha Fin (Est.)</label>
            <input 
              type="date" 
              name="fin" 
              [(ngModel)]="newProject.fecha_fin" 
              class="form-control">
          </div>
        </div>
        
        <div class="modal-actions">
          <button type="button" class="btn btn-secondary" (click)="cerrarModal()">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary">
            Crear Proyecto
          </button>
        </div>
      </form>
    </div>
  </div>